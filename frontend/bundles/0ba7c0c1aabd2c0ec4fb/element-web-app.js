(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1650:function(e,n,t){var o={"./":[262,9],"./ICanvasEffect":[1054,7,11],"./ICanvasEffect.ts":[1054,7,11],"./confetti":[537,9,1],"./confetti/":[537,9,1],"./confetti/index":[537,9,1],"./confetti/index.ts":[537,9,1],"./effect":[1055,9,12],"./effect.ts":[1055,9,12],"./fireworks":[538,9,2],"./fireworks/":[538,9,2],"./fireworks/index":[538,9,2],"./fireworks/index.ts":[538,9,2],"./hearts":[539,9,3],"./hearts/":[539,9,3],"./hearts/index":[539,9,3],"./hearts/index.ts":[539,9,3],"./index":[262,9],"./index.ts":[262,9],"./rainfall":[540,9,4],"./rainfall/":[540,9,4],"./rainfall/index":[540,9,4],"./rainfall/index.ts":[540,9,4],"./snowfall":[541,9,5],"./snowfall/":[541,9,5],"./snowfall/index":[541,9,5],"./snowfall/index.ts":[541,9,5],"./spaceinvaders":[542,9,6],"./spaceinvaders/":[542,9,6],"./spaceinvaders/index":[542,9,6],"./spaceinvaders/index.ts":[542,9,6],"./utils":[329,9],"./utils.ts":[329,9]};function i(e){if(!t.o(o,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=o[e],i=n[0];return Promise.all(n.slice(2).map(t.e)).then((function(){return t.t(i,n[1])}))}i.keys=function(){return Object.keys(o)},i.id=1650,e.exports=i},1780:function(e,n,t){"use strict";t.r(n),t.d(n,"loadApp",(function(){return U}));t(1563);var o=t(120),i=t.n(o),a=t(160),r=t(121),s=t(436),l=t(386),c=t(508),d=t(131),f=t(1),u=t(136),w=t(26),g=t(1574),h=t(40);let p=null;function v(e){const n=Object(h.b)(e);return{screen:n.location.substring(1),params:n.params}}function m(){decodeURIComponent(window.location.hash)!==p&&function(e){if(!window.matrixChat)return;f.a.log("Routing URL ",e.href);const n=v(e);window.matrixChat.showScreen(n.screen,n.params)}(window.location)}function _(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f.a.log("newscreen "+e);const t="#/"+e;p=t,e.startsWith("room/")&&window.location.hash.includes("/$")===t.includes("/$")&&window.location.hash.startsWith(t)&&(n=!0),n?window.location.replace(t):window.location.assign(t)}function b(e){let n;n="vector:"===window.location.protocol?"https://app.element.io/#/register":window.location.protocol+"//"+window.location.host+window.location.pathname+"#/register";const t=Object.keys(e);for(let o=0;o<t.length;++o){n+=0===o?"?":"&";const i=t[o];n+=i+"="+encodeURIComponent(e[i])}return n}function C(){const e=new URL(window.location.href);e.searchParams.delete("loginToken"),f.a.log(`Redirecting to ${e.href} to drop loginToken from queryparams`),window.history.replaceState(null,"",e.href)}async function U(e){var n;window.addEventListener("hashchange",m);const t=a.a.get(),o=Object(h.a)(window.location),p=window.location.protocol+"//"+window.location.host+window.location.pathname;f.a.log("Vector starting at "+p),t.startUpdater();const U=await async function(){let e;try{f.a.log("Verifying homeserver configuration");const n=d.b.get();let t=n.default_server_config;const o=n.default_server_name,i=n.default_hs_url,a=n.default_is_url,c=[t,o,i].filter((e=>!!e));if(c.length>1)throw Object(r.i)(Object(r.c)("Invalid configuration: can only specify one of default_server_config, default_server_name, or default_hs_url."));if(c.length<1)throw Object(r.i)(Object(r.c)("Invalid configuration: no default server specified."));i&&(f.a.log("Config uses a default_hs_url - constructing a default_server_config using this information"),f.a.warn("DEPRECATED CONFIG OPTION: In the future, default_hs_url will not be accepted. Please use default_server_config instead."),t={"m.homeserver":{base_url:i}},a&&(t["m.identity_server"]={base_url:a}));let u=null;t&&(f.a.log("Config uses a default_server_config - validating object"),u=await l.a.fromDiscoveryConfig(t)),o&&(f.a.log("Config uses a default_server_name - doing .well-known lookup"),f.a.warn("DEPRECATED CONFIG OPTION: In the future, default_server_name will not be accepted. Please use default_server_config instead."),u=await l.a.findClientConfig(o)),e=s.a.buildValidatedConfigFromDiscovery(o,u,!0)}catch(n){const{hsUrl:t,isUrl:o,userId:i}=await c.c();if(!t||!i)throw n;f.a.error(n),f.a.warn("A session was found - suppressing config error and using the session's homeserver"),f.a.log("Using pre-existing hsUrl and isUrl: ",{hsUrl:t,isUrl:o}),e=await s.a.validateServerConfigWithStaticUrls(t,o,!0)}return e.isDefault=!0,f.a.log("Using homeserver config:",e),f.a.log("Updating SdkConfig with validated discovery information"),d.b.add({validated_server_config:e}),d.b.get()}(),y=new w.a(U),[O]=await c.b(),x=!!O,k=!!o.loginToken,D=Object(d.c)(U);let E=!0===D.immediate;const I="#/welcome"===window.location.hash||"#"===window.location.hash;if(!E&&D.on_welcome_page&&I&&(E=!0),!x&&!k&&E){f.a.log("Bypassing app load to redirect to SSO");const e=Object(u.createClient)({baseUrl:U.validated_server_config.hsUrl,idBaseUrl:U.validated_server_config.isUrl});return void a.a.get().startSingleSignOn(e,"sso",`/${v(window.location).screen}`)}const P=null!==(n=y.get("default_device_display_name"))&&void 0!==n?n:t.getDefaultDeviceDisplayName();return i.a.createElement(g.a,{onNewScreen:_,makeRegistrationUrl:b,config:U,realQueryParams:o,startingFragmentQueryParams:e,enableGuest:!U.disable_guests,onTokenLoginCompleted:C,initialScreenAfterLogin:v(window.location),defaultDeviceDisplayName:P})}window.React=i.a,f.a.log("Application is running in production mode"),window.matrixLogger=f.a},373:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var o=t(120);t(1736);class i extends o.PureComponent{render(){return o.createElement(o.Fragment,null,this.props.children)}}}}]);
//# sourceMappingURL=element-web-app.js.map