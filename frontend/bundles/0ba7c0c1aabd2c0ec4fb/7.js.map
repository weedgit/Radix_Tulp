{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ExportE2eKeysDialog.tsx","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.ts"],"names":["Phase","ExportE2eKeysDialog","React","Component","constructor","props","super","_defineProperty","ev","preventDefault","passphrase","this","state","passphrase1","passphrase2","setState","errStr","_t","startExport","onFinished","phrase","target","value","phase","Edit","componentWillUnmount","unmounted","Promise","resolve","then","matrixClient","exportRoomKeys","k","MegolmExportEncryption","JSON","stringify","f","blob","Blob","type","FileSaver","saveAs","catch","e","logger","error","msg","friendlyText","Exporting","render","disableForm","createElement","BaseDialog","className","title","onSubmit","onPassphraseFormSubmit","Field","label","onChange","onPassphraseChange","autoFocus","size","disabled","onClick","onCancelClick","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","message","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","Error","line","slice","trim","HEADER_LINE","dataStart","undefined","TRAILER_LINE","dataEnd","base64","latin1String","atob","uint8Array","length","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","LINE_LENGTH","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","getTime","aesProm","hmacProm","all","String","fromCharCode","apply","from","btoa"],"mappings":"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","file":"bundles/0ba7c0c1aabd2c0ec4fb/7.js","sourceRoot":""}