{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts"],"names":["async","createMessageContent","message","isHTML","_ref","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","Boolean","isReply","replyEventId","isReplyAndEditing","body","richToPlain","bodyPrefix","mxEvent","getContent","lines","split","map","l","trim","length","startsWith","getTextReplyFallback","formattedBodyPrefix","html","formatted_body","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","content","msgtype","MsgType","Text","isMarkdownEnabled","SettingsStore","getValue","formattedBody","plainToRich","format","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","roomContext","mxClient","params","_objectWithoutProperties","_excluded","room","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","decorateStartSendingTime","threadId","prom","doMaybeLocalRoomAction","actualRoomId","dis","dispatch","action","event","context","timelineRenderingType","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","command","then","resp","sendRoundTripMetric","editMessage","_ref2","editorStateTransfer","getEvent","getThread","editContent","newContent","cancelPreviousPendingEdit","createRedactEventDialog","onCloseDialog","endEditing","response","getRoomId","oldContent","isContentModified","threadRootId","EditionButtons","onCancelClick","onSaveClick","isSaveDisabled","React","createElement","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","useRoomContext","useMatrixClientContext","useMemo","partCreator","CommandPartCreator","parts","hasEditorState","getSerializedParts","p","deserializePart","_editorStateTransfer$","replace","getFormattedContent","parseEvent","shouldEscape","reduce","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","_payload$context","current","TimelineRenderingType","Room","Action","FocusEditMessageComposer","focusComposer","ComposerInsert","composerType","ComposerType","Edit","setSelection","selection","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","props","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","onChange","setIsSaveDisabled","useState","setContent","_content","_isSaveDisabled","useEditing","ComposerContext","Provider","value","WysiwygComposer","_extends","classNames","onSend","ref","Fragment"],"mappings":"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","file":"bundles/0ba7c0c1aabd2c0ec4fb/35.js","sourceRoot":""}